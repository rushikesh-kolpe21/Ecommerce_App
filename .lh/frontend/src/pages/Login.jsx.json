{
    "sourceFile": "frontend/src/pages/Login.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1769486916307,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1769493543819,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n     event.preventDefault();\r\n     // handle login or signup logic here\r\n     try {\r\n       if(currentState === 'SignUp'){\r\n-        const response = await axios.post(backendUrl + '/api/user/register', {\r\n+         const response = await axios.post(backendUrl + '/api/user/register', {\r\n           userName: name,\r\n           email,\r\n           password\r\n         })\r\n@@ -28,9 +28,9 @@\n           setToken(response.data.token);\r\n           localStorage.setItem('token', response.data.token);\r\n           toast.success('Account created successfully!');\r\n         } else {\r\n-          toast.error(response.data.message)\r\n+          toast.error(response.data.message);\r\n         }\r\n       } else if(currentState === \"Login\"){\r\n         const response = await axios.post(backendUrl + '/api/user/login',{\r\n           email,\r\n"
                }
            ],
            "date": 1769486916307,
            "name": "Commit-0",
            "content": "import React, {  useContext, useEffect, useState } from 'react'\r\nimport { ShopContext } from '../context/ShopContext';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\nexport const Login = () => {\r\n\r\n  const [currentState, setCurrentState] =useState('Login'); // login, signup, forgotpassword\r\n  const {token, setToken, navigate, backendUrl} = useContext(ShopContext);\r\n\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n\r\n  const onSubmitHandler = async (event) => {\r\n    event.preventDefault();\r\n    // handle login or signup logic here\r\n    try {\r\n      if(currentState === 'SignUp'){\r\n        const response = await axios.post(backendUrl + '/api/user/register', {\r\n          userName: name,\r\n          email,\r\n          password\r\n        })\r\n        // console.log(response.data);\r\n        if(response.data.success){\r\n          setToken(response.data.token);\r\n          localStorage.setItem('token', response.data.token);\r\n          toast.success('Account created successfully!');\r\n        } else {\r\n          toast.error(response.data.message)\r\n        }\r\n      } else if(currentState === \"Login\"){\r\n        const response = await axios.post(backendUrl + '/api/user/login',{\r\n          email,\r\n          password,\r\n        })\r\n        // console.log(response.data)\r\n        if(response.data.success){\r\n          setToken(response.data.token);\r\n          localStorage.setItem('token', response.data.token);\r\n          toast.success('Login successful!');\r\n        } else {\r\n          toast.error(response.data.message || 'Login failed');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Login/Signup error:', error);\r\n      toast.error(error.response?.data?.message || error.message || 'An error occurred');\r\n    }\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if(token){\r\n      navigate('/')\r\n    }\r\n  })\r\n  \r\n  return (\r\n    <form onSubmit={onSubmitHandler} className=\"flex flex-col items-center w-[90%] sm:max-w-96 m-auto mt-14 gap-4 text-gray-800\">\r\n      <div className=\"inline-flex items-center gap-2 mb-2 mt-10\">\r\n        <p className='prata-regular text-3xl'>{currentState}</p>\r\n        <hr className='border-none h-[1.5px] w-8 bg-gray-800' />\r\n      </div>\r\n      {currentState === 'Login' ? \"\" :<input  className='w-full px-3 py-2 border border-gray-800 rounded'\r\n      type=\"text\"\r\n      name='name'\r\n      placeholder='Name'\r\n      value={name}\r\n      onChange={(e) => setName(e.target.value)}\r\n      required\r\n       /> }\r\n       \r\n\r\n      <input  className='w-full px-3 py-2 border border-gray-800 rounded'\r\n      type=\"email\"\r\n      name='email'\r\n      placeholder='Email Address'\r\n      value={email}\r\n      onChange={(e) => setEmail(e.target.value)}\r\n      required\r\n       />\r\n        <input  className='w-full px-3 py-2 border border-gray-800 rounded'\r\n      type=\"password\"\r\n      name='password'\r\n      placeholder='Password'\r\n      value={password}\r\n      onChange={(e) => setPassword(e.target.value)}\r\n      required\r\n       />\r\n       <div className=\"w-full flex justify-between text-sm mt-[-8px]\">\r\n        <p>Forgot your Password?</p>\r\n        {\r\n          currentState === 'Login' \r\n          ? <p onClick={()=>setCurrentState('SignUp')} className='cursor-pointer'>Create an Account</p> \r\n          : <p onClick={()=>setCurrentState('Login')} className='cursor-pointer'>Back to Login</p>\r\n        }\r\n       </div>\r\n       <button className='bg-black text-white font-light px-8 py-2 mt-4'>{currentState ==='Login' ? 'Sign In': 'Sign Up'}</button>\r\n    </form>\r\n  )\r\n}\r\n"
        }
    ]
}